(this.webpackJsonpweb=this.webpackJsonpweb||[]).push([[0],{102:function(e,t,n){"use strict";n.r(t);var a=n(0),c=n.n(a),r=n(11),i=n.n(r),o=n(135),s=n(143),l=n(52),j=n.n(l),b=n(66),u=n(14),d=n(22),O=n(133),h=n(134),p=n(136),g=n(76),m=n(144),f=n(137),x=n(146),v=Object(x.a)("div")({display:"flex"}),y=Object(x.a)(v)({flexDirection:"column"}),w=Object(x.a)(v)({flexDirection:"row"}),S=Object(x.a)(v)({justifyContent:"center",alignItems:"center"}),N=Object(x.a)("div")((function(e){return{width:e.width,height:e.height}})),I=n(71),k=n(72),C=n.n(k),D=(n(97),n(98),n(29)),B=n(132),J=n(4),M=function(e){var t=Object(D.a)(),n=Object(B.a)(t.breakpoints.up(800));return Object(J.jsx)(C.a,Object(I.a)({width:"100%",fontSize:14,showGutter:n,wrapEnabled:!0,showPrintMargin:!0,highlightActiveLine:!0,enableBasicAutocompletion:!0,enableLiveAutocompletion:!0,tabSize:2,debounceChangePeriod:600},e))},R=n(7),T=n(45),A=n.n(T),L=n(145),P=function(){return Object(J.jsx)(O.a,{color:"primary",position:"relative",children:Object(J.jsx)(h.a,{children:Object(J.jsx)(o.a,{variant:"h6",color:"inherit",children:"Detail"})})})},_=Object(p.a)((function(e){return{paper:Object(d.a)({marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},e.breakpoints.up(800+2*e.spacing(2)),{width:800,marginLeft:"auto",marginRight:"auto"}),content:{alignItems:"center","& > *":{width:"100%"}},actionBtnGroup:{alignItems:"center",justifyContent:"flex-end"},actionBtn:{width:100,marginLeft:"16px"}}})),E=function(){var e=_(),t=Object(a.useState)(),n=Object(u.a)(t,2),c=n[0],r=n[1],i=Object(a.useState)("unnamed"),s=Object(u.a)(i,2),l=s[0],d=s[1],O=Object(a.useState)(""),h=Object(u.a)(O,2),p=h[0],x=h[1],v=Object(a.useState)(""),S=Object(u.a)(v,2),I=S[0],k=S[1],C=Object(a.useState)(),D=Object(u.a)(C,2),B=D[0],T=D[1],E=Object(R.g)();console.log("params: ",E),Object(a.useEffect)((function(){if("object"===typeof E&&"string"===typeof E.id){var e=E.id,t=localStorage.getItem(e);if("string"===typeof t&&t){var n=JSON.parse(t);r(e),d(n.name),x(atob(n.script)),k(n.lastResult),T(n.updatedTime)}}}),[E]);var F=Object(a.useCallback)((function(){if("string"!==typeof c){var e=Object(L.a)().replace(/-/g,""),t="MVP_ID_".concat(e),n=localStorage.getItem("MVP_IDS"),a="string"===typeof n&&n?JSON.parse(n):[];return a.push(t),localStorage.setItem("MVP_IDS",JSON.stringify(a)),r(t),t}}),[c]),V=Object(a.useCallback)(Object(b.a)(j.a.mark((function e(){var t,n,a,r;return j.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(p.length<=0)){e.next=2;break}return e.abrupt("return");case 2:return k(""),t=btoa(p),console.log("editorValue: ",p),console.log("script: ",t),e.prev=6,e.next=9,fetch("https://www.woshifyz.com/v1/cube/cook",{method:"POST",body:JSON.stringify({script:t}),headers:{"user-agent":"Mozilla/4.0 MDN Example","content-type":"application/json"},mode:"cors"}).then((function(e){return e.json()}));case 9:"undefined"!==typeof(null===(n=e.sent)||void 0===n?void 0:n.result)?(a=c||F(),r=Date.now(),localStorage.setItem(a,JSON.stringify({id:a,name:l,script:t,updatedTime:r,lastResult:n.result})),T(r),k(n.result)):k("No result"),e.next=17;break;case 13:e.prev=13,e.t0=e.catch(6),console.error(e.t0),k("Something wrong");case 17:case"end":return e.stop()}}),e,null,[[6,13]])}))),[p,c,F,l]);return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(P,{}),Object(J.jsx)(g.a,{className:e.paper,children:Object(J.jsxs)(y,{className:e.content,children:[Object(J.jsx)(m.a,{value:l,onChange:function(e){return d(e.target.value)}}),Object(J.jsx)(N,{height:32}),Object(J.jsx)(M,{name:"editor",mode:"python",theme:"tomorrow_night_eighties",value:p,onChange:x}),Object(J.jsx)(N,{height:16}),Object(J.jsxs)(w,{className:e.actionBtnGroup,children:["number"===typeof B&&Object(J.jsxs)(o.a,{variant:"caption",children:["Last run ",A()(B).fromNow()]}),Object(J.jsx)(f.a,{className:e.actionBtn,variant:"contained",color:"secondary",onClick:V,children:"RUN"})]}),Object(J.jsx)(N,{height:16}),Object(J.jsx)(m.a,{multiline:!0,maxRows:7,contentEditable:!1,variant:"outlined",label:"Result",value:I})]})})]})},F=n(31),V=n(138),z=n(139),G=n(140),U=n(141),W=n(142),q=n(74),H=n.n(q),K=n(73),Q=n.n(K),X=Object(p.a)((function(e){var t;return{content:(t={marginTop:e.spacing(3),marginBottom:e.spacing(3),padding:e.spacing(2)},Object(d.a)(t,e.breakpoints.up(800+2*e.spacing(2)),{width:800,marginLeft:"auto",marginRight:"auto"}),Object(d.a)(t,"flexFlow","wrap"),Object(d.a)(t,"& > *",{marginLeft:32}),t),fab:{position:"absolute",bottom:e.spacing(5),right:e.spacing(5)},cardContent:{minWidth:200,maxWidth:400},cardAction:{justifyContent:"flex-end"}}})),Y=function(){return Object(J.jsx)(O.a,{color:"primary",position:"relative",children:Object(J.jsx)(h.a,{children:Object(J.jsx)(o.a,{variant:"h6",color:"inherit",children:"Dashboard"})})})},Z=function(e){var t=e.table,n=X();return Object(J.jsxs)(V.a,{className:n.cardContent,variant:"elevation",children:[Object(J.jsxs)(z.a,{children:[Object(J.jsx)(o.a,{variant:"h5",gutterBottom:!0,children:t.name}),Object(J.jsx)(N,{height:24}),Object(J.jsx)(o.a,{variant:"body2",component:"p",children:t.lastResult}),Object(J.jsxs)(o.a,{color:"textSecondary",variant:"caption",children:["last run ",A()(t.updatedTime).fromNow()]})]}),Object(J.jsx)(G.a,{className:n.cardAction,children:Object(J.jsx)(F.b,{to:"/detail/".concat(t.id),children:Object(J.jsx)(U.a,{color:"secondary",children:Object(J.jsx)(Q.a,{})})})})]})},$=function(){var e=X(),t=Object(a.useState)([]),n=Object(u.a)(t,2),c=n[0],r=n[1];return Object(a.useEffect)((function(){var e=localStorage.getItem("MVP_IDS"),t="string"===typeof e&&e?JSON.parse(e):void 0;if(Array.isArray(t)){var n=t.map((function(e){return localStorage.getItem(e)})).filter((function(e){return"string"===typeof e&&!!e})).map((function(e){return JSON.parse(e)}));n.length>=0&&r(n)}}),[]),console.log("tables: ",c),Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(Y,{}),Object(J.jsx)(w,{className:e.content,children:c.map((function(e){return Object(J.jsx)(Z,{table:e},e.id)}))}),Object(J.jsx)(F.b,{to:"/detail/1000",children:Object(J.jsx)(W.a,{color:"primary","aria-label":"add",className:e.fab,children:Object(J.jsx)(H.a,{})})})]})},ee=function(){return Object(J.jsx)(S,{style:{paddingTop:"10rem"},children:Object(J.jsx)(o.a,{variant:"h2",children:"404 NOT FOUND"})})},te=function(){return Object(J.jsxs)(J.Fragment,{children:[Object(J.jsx)(s.a,{}),Object(J.jsx)(F.a,{basename:"/caas-web",children:Object(J.jsxs)(R.c,{children:[Object(J.jsx)(R.a,{path:"/",element:Object(J.jsx)($,{})}),Object(J.jsx)(R.a,{path:"/detail/:id",element:Object(J.jsx)(E,{})}),Object(J.jsx)(R.a,{path:"*",element:Object(J.jsx)(ee,{})})]})})]})};i.a.render(Object(J.jsx)(c.a.StrictMode,{children:Object(J.jsx)(te,{})}),document.getElementById("root"))}},[[102,1,2]]]);
//# sourceMappingURL=main.eaf4f261.chunk.js.map